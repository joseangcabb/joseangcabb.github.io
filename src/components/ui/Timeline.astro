---
import type { Experience } from '@/types/profile'
import Icon from '@/components/ui/Icon.astro'

export interface Props {
  items: Experience[]
}

const { items } = Astro.props
---

<ol class="relative flex flex-col overflow-y-auto py-5">
  {/* Vertical timeline axis - shifts to left on mobile */}
  <div
    class="absolute top-0 bottom-0 left-6 w-px bg-gray-200 md:left-1/2 md:-translate-x-1/2"
    aria-hidden="true"
  >
  </div>
  {
    items.map((item, index) => {
      const isLeft = index % 2 === 0
      return (
        <li class="group relative flex w-full py-4">
          {/* Timeline marker - shifts to left on mobile, center on desktop */}
          <div class="absolute top-6 left-6 z-10 -translate-x-1/2 md:left-1/2">
            <div class="flex h-12 w-12 items-center justify-center rounded-full border border-gray-200 bg-white ring-8 ring-white transition-all group-hover:border-blue-600">
              <Icon name="mapPin" className="size-6 text-blue-600" />
            </div>
          </div>
          {/* Entry content block - full width on mobile, alternating on desktop */}
          <div
            class={`w-full pl-16 transition-all group-hover:translate-y-[-2px] md:mt-5 md:w-1/2 md:pl-0 ${
              isLeft
                ? 'md:mr-auto md:pr-12 md:text-right'
                : 'md:ml-auto md:pl-12 md:text-left'
            }`}
          >
            <time class="text-xs font-medium text-gray-400">{item.period}</time>
            <div class="mt-2">
              <h3 class="text-lg font-semibold text-gray-900">{item.company}</h3>
              <p class="text-sm text-gray-600">{item.role}</p>
            </div>
          </div>
        </li>
      )
    })
  }
</ol>
